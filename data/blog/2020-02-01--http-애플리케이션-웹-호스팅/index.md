---
title: HTTP 애플리케이션 웹 호스팅
createdDate: "2020-02-01"
updatedDate: "2020-02-01"
author: Ideveloper
tags:
  - network
image: welcoming.png
draft: false
---

`이 글은 HTTP 완벽가이드 18장을 참고해 정리한 포스팅입니다.`

## 시작하기에 앞서

- 콘텐츠 리소스를 저장,중개,관리하는일을 통틀어 웹 호스팅이라고 합니다.
- 콘텐츠를 저장해서 제공하고 관련 로그에 접근하거나 그것을 관리하는데 서버가 필요합니다.

## 가상 호스팅

- 많은 웹 호스팅 업체들은 컴퓨터 한대를 여러 고객이 공유하게 해서 저렴한 웹 호스팅 서비스를 제공합니다.
  - 이를 `공유 호스팅` 혹은 `가상 호스팅` 이라 부르게 됩니다.
- 각 웹 사이트는 다른 서버에서 호스팅하는 것처럼 보이겠지만, 사실은 물리적으로 같은 서버에서 호스팅되게 되는것입니다.
  - 최종 사용자 관점에서는 가사 호스팅에 있는 웹 사이트는 물리적으로 분리된 전용 서버에서 호스팅하는 사이트와 구분할 수 없어야 합니다.
- 호스팅 업체들은 복제 서버 더미(서버 팜)를 만들고 서버팜에 부하를 분산할 수 있습니다.
  - 팜에있는 각 서버는 다른 서버를 복제한 것이며, 수많은 가상 웹 사이트를 호스팅하고 있기 떄문에 관리자는 훨씬 편해집니다.

`서버팜이란?`

```
서버팜은 한곳에 집단으로 수용되어 동작되는 일련의 컴퓨터군을 말한다. 서버팜은 때로 서버 클러스터라고 불리기도 한다. 웹서버팜은 하나 이상의 서버를 가지고 있는 웹사이트 또는 다중 서버를 사용하여 웹호스팅 서비스를 제공하는 ISP를 지칭한다.

[http://www.terms.co.kr/serverfarm.htm 참고]
```

#### 호스트 정보가 없는 가상 서버 요청

- HTTP 1.0 명세는 공용 웹 서버가 호스팅하고 있는 가상 웹 사이트에 누가 접근하고 있는지 식별하는 기능을 제공하지 않습니다.
  - ex) 클라이언트 A가 http://ideveloper2.dev/index.html에 접속하려고 하면 GET /index.html 요청만이 공용 웹서버에 전송 http://leeseungkyu.dev/index.html 도 마찬가지
  - 따라서, 웹서버는 사용자가 어떤 웹 사이트로 접근하려고 하는지 아는데 필요한 정보가 충분하지 않게 됩니다. 두 요청이 완전히 다른 문서를(서로 다른사이트에) 요청하더라도, 요청자체는 똑같이 생기게 되기 때문입니다.

#### 가상 호스팅 동작하게 하기

- 호스트 정보를 HTTP 요청 명세에 넣지 않은 것은, 각 웹서버가 정확히 한 웹 사이트만 호스팅할 것이라고 잘못 예측한 HTTP명세의 실수였다고 합니다. 따라서 HTTP 설계자들은 공유서버인 가상 호스팅을 고려하지 않게 된것이구요.
- `HTTP/1.1` 을 지원하는 서버는 HTTP 요청 메시지에 있는 전체 URL을 처리할수 있어야 합니다. (모든 HTTP 요청메시지에 경로 컴포넌트만 보내는것이 아니라, 완전한 URL도 포함해 보내게 함)

- 기존 모든 애플리케이션이 위의 명세에 맞추어 업그레이드 하기까지는 오랜 시간이 걸릴것이라 판단했고 아래와 같은 네가지 기술이 나타났다고 합니다.
  - URL 경로를 통한 가상 호스팅
  - 포트번호를 통한 가상 호스팅
  - IP 주소를 통한 가상 호스팅
  - Host 헤더를 통한 가상 호스팅

`url 경로를 통한 가상 호스팅`

웹 사이트마다 특정 경로를 아래와 같이 붙이는 방식. 그러나 불필요한 접두어가 생기므로 좋지는 않은 방법.

- http://ideveloper2.dev/ideveloper2/index.html
- http://leeseungkyu.dev/leeseungkyu/index.html

`포트번호를 통한 가상 호스팅`

웹서버에 각각 다른 포트번호를 할당하는 방식, 사용자들은 URL에 비표준 포트를 쓰지 않고서도 리소스를 찾길 원하기 때문에 좋지는 않은 방법.

`IP 주소를 통한 가상 호스팅`

가상 웹 사이트에 유일한 IP 주소를 한 개 이상 부여하는 방식.
ex) http://ideveloper2.dev/ 에 208.172.32.3 할당

- 클라이언트가 http://ideveloper2.dev/index.html 를 요청
- 클라이언트는 ip주소를 요청해 208.172.32.3를 받음
- 클라이언트는 208.172.32.3에 있는 공용 웹 서버에 tcp 커넥션을 맺음
- 클라이언트는 GET /index.html/1.0 요청을 보냄
- 웹서버가 응답을 전송하기에 앞서, 실제 목적지 IP주소(208.172.32.3)를 기록하고, 이것이 죠의 웹 사이트에 대한 가상 IP주소라는 것을 판단해 /ideveloepr 하위 디렉토리에서 요청을 처리 /ideveloper/index.html을 반환

가상 IP 호스팅 방식은 잘 동작하지만, 규모가 아주 큰 호스팅 업체 에게는 약간 어려운 문제를 안겨주게 됩니다.

-
